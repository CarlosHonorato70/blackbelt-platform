# ============================================================================
# Black Belt Platform - Environment Variables
# ============================================================================
# Copy this file to .env and fill in your values
# DO NOT commit .env file to version control!
# ============================================================================

# ----------------------------------------------------------------------------
# Server Configuration
# ----------------------------------------------------------------------------
NODE_ENV=development                    # development | production
PORT=3000                              # Server port

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------
DATABASE_URL=mysql://user:password@localhost:3306/blackbelt
# Format: mysql://username:password@host:port/database
# Example Docker: mysql://blackbelt_user:blackbelt_password@localhost:3306/blackbelt

# ----------------------------------------------------------------------------
# Authentication (OAuth 2.0)
# ----------------------------------------------------------------------------
OAUTH_CLIENT_ID=your_oauth_client_id
OAUTH_CLIENT_SECRET=your_oauth_client_secret
OAUTH_CALLBACK_URL=http://localhost:3000/api/oauth/callback
OAUTH_AUTHORIZE_URL=https://oauth-provider.com/authorize
OAUTH_TOKEN_URL=https://oauth-provider.com/token
OAUTH_USERINFO_URL=https://oauth-provider.com/userinfo

# Session Management
SESSION_SECRET=change-this-to-a-random-32-character-string
# Generate with: openssl rand -base64 32

# ----------------------------------------------------------------------------
# Email Configuration (SMTP)
# ----------------------------------------------------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@blackbelt.com.br
SMTP_FROM_NAME=Black Belt Platform

# ----------------------------------------------------------------------------
# CORS Configuration
# ----------------------------------------------------------------------------
VITE_FRONTEND_URL=http://localhost:3000
FRONTEND_URL=http://localhost:3000
# Production: https://your-domain.com

# ----------------------------------------------------------------------------
# Rate Limiting
# ----------------------------------------------------------------------------
# Uses in-memory by default
# For production with multiple servers, configure Redis:
REDIS_URL=redis://localhost:6379
# REDIS_PASSWORD=your_redis_password

# ----------------------------------------------------------------------------
# File Storage (Optional - S3)
# ----------------------------------------------------------------------------
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_REGION=us-east-1
# AWS_S3_BUCKET=blackbelt-uploads

# ----------------------------------------------------------------------------
# Monitoring & Logging (Optional)
# ----------------------------------------------------------------------------
# LOG_LEVEL=info                       # error | warn | info | debug
# SENTRY_DSN=https://...               # Error tracking
# DATADOG_API_KEY=your_key             # APM monitoring

# ----------------------------------------------------------------------------
# Feature Flags
# ----------------------------------------------------------------------------
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_COPSOQ_REMINDERS=true
ENABLE_AUTO_PROPOSAL_GENERATION=true

# ----------------------------------------------------------------------------
# Security
# ----------------------------------------------------------------------------
# Rate Limiting Configuration
RATE_LIMIT_WINDOW_MS=900000            # 15 minutes in ms
RATE_LIMIT_MAX_REQUESTS=100            # Max requests per window
AUTH_RATE_LIMIT_MAX=5                  # Max auth attempts per window

# IP Blocking
IP_BLOCK_THRESHOLD=5                   # Violations before auto-block

# ----------------------------------------------------------------------------
# Application Settings
# ----------------------------------------------------------------------------
DEFAULT_TIMEZONE=America/Sao_Paulo
DEFAULT_LOCALE=pt-BR
DEFAULT_CURRENCY=BRL

# Pagination
DEFAULT_PAGE_SIZE=30
MAX_PAGE_SIZE=100

# File Upload
MAX_FILE_SIZE_MB=50
ALLOWED_FILE_TYPES=pdf,doc,docx,xls,xlsx,jpg,jpeg,png

# Session
SESSION_DURATION_HOURS=24
SESSION_IDLE_TIMEOUT_HOURS=2

# ----------------------------------------------------------------------------
# COPSOQ Configuration
# ----------------------------------------------------------------------------
COPSOQ_INVITE_EXPIRY_DAYS=7
COPSOQ_REMINDER_DAYS=3,6                # Days to send reminders
COPSOQ_MIN_RESPONSES=10                 # Min responses for report

# ----------------------------------------------------------------------------
# Pricing Configuration
# ----------------------------------------------------------------------------
# Default tax regime if not configured
DEFAULT_TAX_REGIME=simples_nacional     # mei | simples_nacional | lucro_presumido | autonomous

# ----------------------------------------------------------------------------
# Development Only
# ----------------------------------------------------------------------------
# Enable debug logs
DEBUG=false

# Skip authentication (development only - NEVER in production!)
SKIP_AUTH=false

# Mock external services
MOCK_SMTP=false
MOCK_OAUTH=false

# ----------------------------------------------------------------------------
# Docker Configuration
# ----------------------------------------------------------------------------
# These match docker-compose.yml
MYSQL_ROOT_PASSWORD=root_password
MYSQL_DATABASE=blackbelt
MYSQL_USER=blackbelt_user
MYSQL_PASSWORD=blackbelt_password
MYSQL_PORT=3306

# ----------------------------------------------------------------------------
# CI/CD (GitHub Actions)
# ----------------------------------------------------------------------------
# Set these as GitHub Secrets, not in .env
# GH_TOKEN=github_personal_access_token
# DEPLOY_SSH_KEY=ssh_private_key
# DEPLOY_HOST=production-server.com
# DEPLOY_USER=deploy
# DEPLOY_PATH=/var/www/blackbelt

# ============================================================================
# Setup Instructions
# ============================================================================
# 1. Copy this file: cp .env.example .env
# 2. Fill in all values marked with your_*
# 3. Generate SESSION_SECRET: openssl rand -base64 32
# 4. Never commit .env to git (it's in .gitignore)
# 5. For production, use secure values and enable all security features
# ============================================================================

# ============================================================================
# Quick Start Values (Development)
# ============================================================================
# For quick local development, use these docker-compose values:
# DATABASE_URL=mysql://blackbelt_user:blackbelt_password@localhost:3306/blackbelt
# SESSION_SECRET=development-secret-change-in-production
# VITE_FRONTEND_URL=http://localhost:3000
# ============================================================================
