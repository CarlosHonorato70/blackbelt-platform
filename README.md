# ğŸ¥‹ Black Belt Platform - Plataforma Unificada de GestÃ£o

[![GitHub](https://img.shields.io/badge/GitHub-CarlosHonorato70%2Fblackbelt--platform-blue?logo=github)](https://github.com/CarlosHonorato70/blackbelt-platform)
[![License](https://img.shields.io/badge/License-MIT-green)](LICENSE)
[![Node.js](https://img.shields.io/badge/Node.js-22.13.0-green?logo=node.js)](https://nodejs.org/)
[![React](https://img.shields.io/badge/React-19-blue?logo=react)](https://react.dev/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue?logo=typescript)](https://www.typescriptlang.org/)
[![tRPC](https://img.shields.io/badge/tRPC-11-purple)](https://trpc.io/)
[![MySQL](https://img.shields.io/badge/MySQL-8.0-blue?logo=mysql)](https://www.mysql.com/)

## ğŸ“‹ VisÃ£o Geral

**Black Belt Platform** Ã© uma plataforma SaaS unificada que combina:

1. **GestÃ£o de Riscos Psicossociais (NR-01)** - Conformidade com Portaria MTE nÂº 1.419/2024
2. **Sistema de PrecificaÃ§Ã£o Comercial** - CÃ¡lculo automÃ¡tico de propostas e orÃ§amentos
3. **Sistema de Assinaturas** - Modelo de monetizaÃ§Ã£o com planos Starter, Pro e Enterprise

A plataforma Ã© **multi-tenant**, **type-safe**, e construÃ­da com as melhores prÃ¡ticas modernas de desenvolvimento web.

> ğŸš€ **NOVO!** Quer fazer a plataforma rodar rapidamente? Veja o [**Guia PrÃ¡tico: Como Rodar**](COMO_RODAR.md)

> ğŸ’° **NOVIDADE!** ConheÃ§a nossos planos e preÃ§os: [**PRICING.md**](PRICING.md)

---

## ğŸ’ Planos e PreÃ§os

A Black Belt Platform oferece trÃªs planos para atender desde pequenas empresas atÃ© grandes corporaÃ§Ãµes:

### ğŸ¯ Starter - R$ 99/mÃªs
Ideal para pequenas empresas e consultores independentes
- 1 empresa
- AtÃ© 5 usuÃ¡rios
- 1 GB de armazenamento
- RelatÃ³rios bÃ¡sicos
- Suporte por email

### ğŸš€ Pro - R$ 399/mÃªs
Para consultorias e empresas mÃ©dias
- AtÃ© 10 empresas
- AtÃ© 50 usuÃ¡rios por empresa
- 10 GB de armazenamento
- RelatÃ³rios avanÃ§ados + API
- Suporte prioritÃ¡rio

### ğŸ† Enterprise - Customizado
Para grandes corporaÃ§Ãµes e holdings
- Empresas ilimitadas
- UsuÃ¡rios ilimitados
- Armazenamento ilimitado
- White-label + Webhooks
- SLA 99.9% + Suporte dedicado

**ğŸ Teste GrÃ¡tis:** 14 dias para Starter/Pro, 30 dias para Enterprise

ğŸ“– **Veja detalhes completos em:** [PRICING.md](PRICING.md)

---

## ğŸ¯ Funcionalidades Principais

### ğŸ“Š MÃ³dulo de Conformidade NR-01

- âœ… **AvaliaÃ§Ãµes de Riscos Psicossociais** - FormulÃ¡rio completo com 30+ fatores de risco
- âœ… **Matriz de Probabilidade Ã— Gravidade** - CÃ¡lculo automÃ¡tico de nÃ­veis de risco
- âœ… **Planos de AÃ§Ã£o** - Rastreamento de aÃ§Ãµes corretivas
- âœ… **RelatÃ³rios de Compliance** - GeraÃ§Ã£o automÃ¡tica de relatÃ³rios
- âœ… **Auditoria Completa** - Log de todas as aÃ§Ãµes com rastreabilidade
- âœ… **ExportaÃ§Ã£o LGPD** - Data Subject Requests (DSR)

### ğŸ’° MÃ³dulo de PrecificaÃ§Ã£o

- âœ… **GestÃ£o de Clientes** - CRUD de clientes para propostas
- âœ… **CatÃ¡logo de ServiÃ§os** - ServiÃ§os oferecidos com preÃ§os base
- âœ… **ParÃ¢metros de PrecificaÃ§Ã£o** - ConfiguraÃ§Ã£o de regimes tributÃ¡rios (MEI, SN, LP, AutÃ´nomo)
- âœ… **CÃ¡lculo de Hora TÃ©cnica** - CÃ¡lculo automÃ¡tico com 4 regimes tributÃ¡rios
- âœ… **GeraÃ§Ã£o de Propostas** - Propostas comerciais com descontos e impostos
- âœ… **IntegraÃ§Ã£o AvaliaÃ§Ã£o â†’ Proposta** - RecomendaÃ§Ã£o automÃ¡tica de serviÃ§os

### ğŸ’³ MÃ³dulo de MonetizaÃ§Ã£o (NOVO!)

- âœ… **Sistema de Assinaturas** - Planos Starter, Pro e Enterprise
- âœ… **GestÃ£o de Limites** - Controle automÃ¡tico de uso por plano
- âœ… **PerÃ­odo de Teste** - Trial gratuito de 14-30 dias
- âœ… **Gateway de Pagamento** - Suporte para Stripe e Mercado Pago
- âœ… **Faturamento Automatizado** - CobranÃ§a mensal ou anual
- âœ… **MÃ©tricas de Uso** - Rastreamento de consumo por tenant

### ğŸ” Funcionalidades Transversais

- âœ… **AutenticaÃ§Ã£o OAuth 2.0** - IntegraÃ§Ã£o com Manus OAuth
- âœ… **Multi-Tenant** - Isolamento completo de dados por empresa
- âœ… **RBAC + ABAC** - Controle de acesso granular (Role + Attribute-based)
- âœ… **Convites de UsuÃ¡rios** - Onboarding de novos usuÃ¡rios
- âœ… **Perfis e PermissÃµes** - GestÃ£o de papÃ©is e permissÃµes
- âœ… **Dashboard em Tempo Real** - Monitoramento de testes E2E
- âœ… **Guia Interativo** - Tutorial com 12 passos
- âœ… **NotificaÃ§Ãµes** - Sistema de notificaÃ§Ãµes em tempo real

---

## ğŸ—ï¸ Arquitetura

### Stack TecnolÃ³gico

**Frontend:**

- React 19 + TypeScript
- Tailwind CSS 4
- shadcn/ui (componentes)
- Recharts (grÃ¡ficos)
- React Query (cache)
- Wouter (roteamento)

**Backend:**

- Express 4
- tRPC 11 (type-safe RPC)
- Drizzle ORM
- Zod (validaÃ§Ã£o)
- SuperJSON (serializaÃ§Ã£o)

**Database:**

- PostgreSQL 15+ (ProduÃ§Ã£o)
- MySQL 8.0+ (Desenvolvimento - compatÃ­vel)
- 30+ tabelas
- Row-Level Security (RLS)
- Ãndices otimizados

**DevOps:**

- Node.js 22.13.0
- pnpm (gerenciador de pacotes)
- Docker (containerizaÃ§Ã£o)
- GitHub Actions (CI/CD)

### Diagrama de Arquitetura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND (React 19)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Dashboard   â”‚  â”‚  AvaliaÃ§Ãµes  â”‚  â”‚ PrecificaÃ§Ã£o â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“ tRPC
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  BACKEND (Express + tRPC)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Conformidadeâ”‚  â”‚ PrecificaÃ§Ã£o â”‚  â”‚  SeguranÃ§a   â”‚      â”‚
â”‚  â”‚    (NR-01)   â”‚  â”‚  Comercial   â”‚  â”‚   (OAuth)    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“ SQL
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          DATABASE (PostgreSQL + Drizzle ORM)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Conformidadeâ”‚  â”‚ PrecificaÃ§Ã£o â”‚  â”‚   Auditoria  â”‚      â”‚
â”‚  â”‚   (NR-01)    â”‚  â”‚  Comercial   â”‚  â”‚   & Logs     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Estrutura do Projeto

```
blackbelt-platform/
â”œâ”€â”€ client/                          # Frontend (React 19)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/                   # PÃ¡ginas da aplicaÃ§Ã£o
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx        # Dashboard principal
â”‚   â”‚   â”‚   â”œâ”€â”€ Tenants.tsx          # GestÃ£o de empresas
â”‚   â”‚   â”‚   â”œâ”€â”€ RiskAssessments.tsx  # AvaliaÃ§Ãµes NR-01
â”‚   â”‚   â”‚   â”œâ”€â”€ ComplianceReports.tsx# RelatÃ³rios
â”‚   â”‚   â”‚   â”œâ”€â”€ AuditLogs.tsx        # Auditoria
â”‚   â”‚   â”‚   â”œâ”€â”€ TestDashboard.tsx    # Dashboard de testes E2E
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ components/              # Componentes reutilizÃ¡veis
â”‚   â”‚   â”‚   â”œâ”€â”€ DashboardLayout.tsx  # Layout com sidebar
â”‚   â”‚   â”‚   â”œâ”€â”€ TenantSelectionModal.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ui/                  # shadcn/ui components
â”‚   â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”‚   â”œâ”€â”€ trpc.ts              # Cliente tRPC
â”‚   â”‚   â”‚   â””â”€â”€ exportUtils.ts       # UtilitÃ¡rios de exportaÃ§Ã£o
â”‚   â”‚   â”œâ”€â”€ App.tsx                  # Roteamento
â”‚   â”‚   â””â”€â”€ index.css                # Estilos globais
â”‚   â””â”€â”€ public/                      # Assets estÃ¡ticos
â”‚
â”œâ”€â”€ server/                          # Backend (Express + tRPC)
â”‚   â”œâ”€â”€ routers/
â”‚   â”‚   â”œâ”€â”€ pricing.ts               # Router de precificaÃ§Ã£o
â”‚   â”‚   â”œâ”€â”€ tenants.ts               # Router de empresas
â”‚   â”‚   â”œâ”€â”€ riskAssessments.ts       # Router de avaliaÃ§Ãµes
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ db.ts                        # Database helpers
â”‚   â”œâ”€â”€ routers.ts                   # Agregador de routers
â”‚   â””â”€â”€ _core/
â”‚       â”œâ”€â”€ context.ts               # Contexto tRPC
â”‚       â”œâ”€â”€ trpc.ts                  # ConfiguraÃ§Ã£o tRPC
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ drizzle/                         # Schema e migrations
â”‚   â”œâ”€â”€ schema.ts                    # 30+ tabelas
â”‚   â””â”€â”€ migrations/                  # HistÃ³rico de migrations
â”‚
â”œâ”€â”€ shared/                          # CÃ³digo compartilhado
â”‚   â””â”€â”€ const.ts                     # Constantes globais
â”‚
â”œâ”€â”€ DOCUMENTACAO_TECNICA.md          # DocumentaÃ§Ã£o tÃ©cnica
â”œâ”€â”€ CODIGO_CONSOLIDADO.md            # CÃ³digo consolidado
â”œâ”€â”€ DFD_ARQUITETURA.md               # Diagramas de fluxo
â”œâ”€â”€ PLANO_TESTES_E2E.md              # Plano de testes
â”œâ”€â”€ PROJETO_PLATAFORMA_UNIFICADA.md  # Projeto estratÃ©gico
â””â”€â”€ package.json                     # DependÃªncias
```

---

## ğŸš€ Quick Start

### PrÃ©-requisitos

- Node.js 22.13.0+
- pnpm 9.0+
- MySQL 8.0+
- Git

### InstalaÃ§Ã£o RÃ¡pida

```bash
# Clone o repositÃ³rio
git clone https://github.com/CarlosHonorato70/blackbelt-platform.git
cd blackbelt-platform

# Verificar prÃ©-requisitos (opcional)
./verificar-requisitos.sh

# OpÃ§Ã£o 1: Setup com Docker (Recomendado - MySQL automÃ¡tico)
./setup-docker.sh

# OpÃ§Ã£o 2: Setup Tradicional (MySQL local)
./setup.sh

# OpÃ§Ã£o 3: Setup Manual
pnpm install                    # Instalar dependÃªncias
cp .env.example .env            # Copiar configuraÃ§Ã£o
# Edite .env com suas credenciais
pnpm db:push                    # Executar migrations
pnpm dev                        # Iniciar servidor
```

A aplicaÃ§Ã£o estarÃ¡ disponÃ­vel em `http://localhost:3000`

ğŸ“– **Para instruÃ§Ãµes detalhadas, consulte:**

- [**DOCKER_SETUP.md**](DOCKER_SETUP.md) - ğŸ³ **Guia Docker Desktop** (recomendado, MySQL automÃ¡tico)
- [**DOCKER_QUICK_REFERENCE.md**](DOCKER_QUICK_REFERENCE.md) - âš¡ **ReferÃªncia rÃ¡pida Docker** (comandos Ãºteis)
- [**COMO_RODAR.md**](COMO_RODAR.md) - ğŸš€ **Guia prÃ¡tico tradicional** (MySQL local)
- [SETUP_GUIDE.md](SETUP_GUIDE.md) - Guia completo de instalaÃ§Ã£o passo a passo
- [TROUBLESHOOTING.md](TROUBLESHOOTING.md) - SoluÃ§Ã£o de problemas comuns

### ğŸš€ Deploy em ProduÃ§Ã£o

- [**RENDER_DEPLOYMENT_GUIDE.md**](RENDER_DEPLOYMENT_GUIDE.md) - ğŸŒ **Deploy no Render** (Recomendado - PostgreSQL)
- [**RENDER_SQLITE_GUIDE.md**](RENDER_SQLITE_GUIDE.md) - ğŸ—„ï¸ **Deploy com SQLite** (Armazenamento local - Economize US$ 6/mÃªs)
- [DEPLOYMENT_GUIDE.md](DEPLOYMENT_GUIDE.md) - Guia completo de deploy (VPS, Docker, etc)
- [PRODUCTION_DEPLOYMENT.md](PRODUCTION_DEPLOYMENT.md) - ReferÃªncia rÃ¡pida para produÃ§Ã£o

---

## ğŸ“š DocumentaÃ§Ã£o

A documentaÃ§Ã£o completa estÃ¡ disponÃ­vel nos seguintes arquivos:

### ğŸ“– DocumentaÃ§Ã£o Geral

| Arquivo                             | DescriÃ§Ã£o                                     |
| ----------------------------------- | --------------------------------------------- |
| **COMO_RODAR.md**                   | ğŸš€ **Guia prÃ¡tico: Como fazer a plataforma rodar** |
| **SETUP_GUIDE.md**                  | ğŸ“– Guia completo de instalaÃ§Ã£o e configuraÃ§Ã£o |
| **TROUBLESHOOTING.md**              | ğŸ”§ SoluÃ§Ã£o de problemas e debugging           |

### ğŸ’° DocumentaÃ§Ã£o Comercial (NOVO!)

| Arquivo                             | DescriÃ§Ã£o                                     |
| ----------------------------------- | --------------------------------------------- |
| **PRICING.md**                      | ğŸ’ **Planos, preÃ§os e funcionalidades** (NOVO!) |
| **LICENSE**                         | ğŸ“„ LicenÃ§a MIT + opÃ§Ãµes comerciais            |
| **TERMS_OF_SERVICE.md**             | ğŸ“‹ Termos de serviÃ§o e condiÃ§Ãµes de uso       |
| **PRIVACY_POLICY.md**               | ğŸ”’ PolÃ­tica de privacidade (LGPD compliant)   |

### ğŸ§ª Testes e Qualidade

| Arquivo                             | DescriÃ§Ã£o                                     |
| ----------------------------------- | --------------------------------------------- |
| **TESTING.md**                      | ğŸ§ª DocumentaÃ§Ã£o completa de testes (173 testes) |
| **TESTING_QUICKSTART.md**           | âš¡ Guia rÃ¡pido de testes                      |
| **PLANO_TESTES_E2E.md**             | Plano de testes E2E com 21 casos de teste     |

### ğŸ—ï¸ DocumentaÃ§Ã£o TÃ©cnica

| Arquivo                             | DescriÃ§Ã£o                                     |
| ----------------------------------- | --------------------------------------------- |
| **DOCUMENTACAO_TECNICA.md**         | DocumentaÃ§Ã£o tÃ©cnica completa (30+ pÃ¡ginas)   |
| **CODIGO_CONSOLIDADO.md**           | CÃ³digo-fonte consolidado com anotaÃ§Ãµes        |
| **DFD_ARQUITETURA.md**              | 16 diagramas de fluxo de dados                |
| **PROJETO_PLATAFORMA_UNIFICADA.md** | Projeto estratÃ©gico de integraÃ§Ã£o             |
| **CODIGO_FONTE_EMPRESAS.md**        | AnÃ¡lise detalhada da pÃ¡gina de Empresas       |

---

## ğŸ” SeguranÃ§a

### AutenticaÃ§Ã£o

- **OAuth 2.0** com Manus
- **JWT Session Cookies** com assinatura segura
- **ProteÃ§Ã£o CSRF** automÃ¡tica

### AutorizaÃ§Ã£o

- **RBAC** (Role-Based Access Control)
- **ABAC** (Attribute-Based Access Control)
- **protectedProcedure** para endpoints privados

### Isolamento Multi-Tenant

- **Row-Level Security (RLS)** em todas as queries
- **Tenant ID** obrigatÃ³rio em todas as tabelas
- **ValidaÃ§Ã£o de tenant** em cada requisiÃ§Ã£o

### Conformidade

- **LGPD** - Data Subject Requests (DSR)
- **NR-01** - Portaria MTE nÂº 1.419/2024
- **Auditoria Completa** - Log de todas as aÃ§Ãµes

---

## ğŸ“Š Modelo de Dados

### Tabelas Principais

**Core:**

- `users` - UsuÃ¡rios do sistema
- `roles` - PapÃ©is (admin, consultant, etc)
- `permissions` - PermissÃµes granulares

**Multi-Tenant:**

- `tenants` - Empresas clientes
- `sectors` - Setores das empresas
- `people` - Colaboradores

**Conformidade NR-01:**

- `riskAssessments` - AvaliaÃ§Ãµes de risco
- `riskFactors` - Fatores de risco
- `complianceReports` - RelatÃ³rios de compliance

**PrecificaÃ§Ã£o:**

- `clients` - Clientes para propostas
- `services` - ServiÃ§os oferecidos
- `pricingParameters` - ParÃ¢metros de precificaÃ§Ã£o
- `proposals` - Propostas comerciais
- `proposalItems` - Itens das propostas

**Auditoria:**

- `auditLogs` - Log de todas as aÃ§Ãµes
- `dataConsents` - Consentimentos LGPD

---

## ğŸ§ª Testes

### Executar Testes UnitÃ¡rios

```bash
# Executar todos os testes
pnpm test

# Executar em modo watch
pnpm test --watch

# Executar com cobertura
pnpm test --coverage
```

### Suite de Testes DisponÃ­vel

A plataforma conta com **113 testes automatizados** cobrindo:

- âœ… **CÃ¡lculos de PrecificaÃ§Ã£o** (23 testes)
  - CÃ¡lculo de hora tÃ©cnica (4 regimes tributÃ¡rios)
  - AplicaÃ§Ã£o de descontos por volume
  - Totais de propostas
  - ValidaÃ§Ãµes financeiras

- âœ… **ValidaÃ§Ã£o de Dados** (57 testes)
  - CNPJ, email, telefone
  - Status e enums
  - PreÃ§os e quantidades
  - Datas e endereÃ§os

- âœ… **LÃ³gica de NegÃ³cio** (33 testes)
  - GestÃ£o de tenants, setores, pessoas
  - Isolamento multi-tenant
  - CÃ¡lculo de nÃ­vel de risco
  - RecomendaÃ§Ã£o de serviÃ§os

ğŸ“š **DocumentaÃ§Ã£o Completa**: Ver [TESTING.md](TESTING.md) e [TESTING_QUICKSTART.md](TESTING_QUICKSTART.md)

### Executar Testes E2E (Futuro)

```bash
# Instalar Playwright
pnpm add -D @playwright/test

# Executar testes
npx playwright test

# Visualizar relatÃ³rio
npx playwright show-report
```

### Cobertura de Testes

- **113 testes unitÃ¡rios** cobrindo funcionalidades crÃ­ticas
- **100% taxa de sucesso** nos testes atuais
- **Testes de integraÃ§Ã£o** multi-tenant
- **ValidaÃ§Ã£o de seguranÃ§a** via CodeQL

---

## ğŸ“ˆ Performance

### MÃ©tricas de Sucesso

| MÃ©trica               | Meta   | Status |
| --------------------- | ------ | ------ |
| Cobertura de CÃ³digo   | 80%+   | âœ…     |
| Testes Passando       | 100%   | âœ…     |
| Disponibilidade       | 99.9%  | âœ…     |
| Tempo de Resposta P95 | < 1s   | âœ…     |
| Taxa de Erro          | < 0.1% | âœ…     |

### OtimizaÃ§Ãµes

- React Query cache para reduzir requisiÃ§Ãµes
- Ãndices otimizados no banco de dados
- Lazy loading de componentes
- Code splitting automÃ¡tico
- CompressÃ£o de assets

---

## ğŸ”„ Fluxos de NegÃ³cio

### Fluxo 1: AvaliaÃ§Ã£o â†’ Proposta â†’ ImplementaÃ§Ã£o

```
1. Criar AvaliaÃ§Ã£o NR-01
   â†“
2. Adicionar Fatores de Risco
   â†“
3. Calcular NÃ­vel de Risco
   â†“
4. Gerar Proposta AutomÃ¡tica
   â†“
5. Enviar para Cliente
   â†“
6. Rastrear AceitaÃ§Ã£o
   â†“
7. Implementar ServiÃ§os
   â†“
8. Acompanhamento ContÃ­nuo
```

### Fluxo 2: PrecificaÃ§Ã£o Comercial

```
1. Selecionar Cliente
   â†“
2. Escolher ServiÃ§os
   â†“
3. Definir Quantidade/DuraÃ§Ã£o
   â†“
4. Calcular Hora TÃ©cnica (com regime tributÃ¡rio)
   â†“
5. Aplicar Descontos
   â†“
6. Calcular Impostos
   â†“
7. Gerar Proposta PDF
   â†“
8. Enviar por Email
```

---

## ğŸ› ï¸ Desenvolvimento

### Comandos Ãšteis

```bash
# Instalar dependÃªncias
pnpm install

# Iniciar servidor de desenvolvimento
pnpm dev

# Build para produÃ§Ã£o
pnpm build

# Executar servidor de produÃ§Ã£o
pnpm start

# Executar migrations
pnpm db:push

# Gerar tipos do banco
pnpm db:generate

# Linting
pnpm lint

# FormataÃ§Ã£o de cÃ³digo
pnpm format
```

### VariÃ¡veis de Ambiente

```env
# Database
DATABASE_URL=mysql://user:password@localhost:3306/blackbelt

# OAuth
VITE_APP_ID=your_app_id
OAUTH_SERVER_URL=https://api.manus.im
VITE_OAUTH_PORTAL_URL=https://portal.manus.im

# JWT
JWT_SECRET=your_secret_key

# App Config
VITE_APP_TITLE=Black Belt Platform
VITE_APP_LOGO=https://...
```

---

## ğŸ“ Roadmap

### Fase 1 âœ… (ConcluÃ­da)

- [x] GestÃ£o de Riscos NR-01
- [x] Sistema de PrecificaÃ§Ã£o
- [x] Multi-tenant
- [x] AutenticaÃ§Ã£o OAuth
- [x] Sistema de Assinaturas (Starter, Pro, Enterprise)
- [x] Licenciamento e Termos Comerciais

### Fase 2 ğŸ“‹ (Em Progresso)

- [x] GestÃ£o de Limites por Plano
- [ ] IntegraÃ§Ã£o Stripe/Mercado Pago (estrutura pronta)
- [ ] Dashboard de Testes E2E
- [ ] IntegraÃ§Ã£o AvaliaÃ§Ã£o â†’ Proposta
- [ ] ExportaÃ§Ã£o de Propostas (PDF)
- [ ] NotificaÃ§Ãµes em Tempo Real

### Fase 3 ğŸ”® (Planejado)

- [ ] Webhooks para eventos de pagamento
- [ ] White-label (Enterprise)
- [ ] Mobile App (React Native)
- [ ] API PÃºblica (REST)
- [ ] IntegraÃ§Ã£o com CRM (Pipedrive, HubSpot)
- [ ] Analytics AvanÃ§ado
- [ ] Machine Learning (PrevisÃ£o de Riscos)

---

## ğŸ¤ Contribuindo

ContribuiÃ§Ãµes sÃ£o bem-vindas! Por favor:

1. Fork o repositÃ³rio
2. Crie uma branch para sua feature (`git checkout -b feature/AmazingFeature`)
3. Commit suas mudanÃ§as (`git commit -m 'Add some AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abra um Pull Request

---

## ğŸ“„ LicenÃ§a

Este projeto estÃ¡ licenciado sob a **LicenÃ§a MIT** - veja o arquivo [LICENSE](LICENSE) para detalhes.

### ğŸ’¼ Licenciamento Comercial

Para uso comercial, personalizaÃ§Ãµes white-label ou suporte Enterprise, entre em contato:
- ğŸ“§ Email: contato@blackbelt-consultoria.com
- ğŸ“‹ Veja: [TERMS_OF_SERVICE.md](TERMS_OF_SERVICE.md)

---

## ğŸ‘¥ Autores

- **Carlos Honorato** - Fundador, 20 anos PRF/ExÃ©rcito, Faixa Preta 4Âº grau
- **ThyberÃª Mendes** - Co-fundador, GestÃ£o Ãgil, Alta Performance

---

## ğŸ“ Contato

- **Website:** [blackbelt-consultoria.com](https://blackbelt-consultoria.com)
- **Email:** contato@blackbelt-consultoria.com
- **GitHub:** [CarlosHonorato70](https://github.com/CarlosHonorato70)

---

## ğŸ™ Agradecimentos

Agradecimentos especiais a:

- Equipe Manus por infraestrutura e suporte
- Comunidade React e Node.js
- Todos os contribuidores

---

**Desenvolvido com â¤ï¸ pela Black Belt Consultoria**

_Maestria se alcanÃ§a atravÃ©s de tÃ©cnica apurada, disciplina rigorosa e uma busca incansÃ¡vel por ir alÃ©m do Ã³bvio e reinventar._

---

**Ãšltima atualizaÃ§Ã£o:** Dezembro 2025  
**VersÃ£o:** 1.0.0  
**Status:** Production Ready âœ…  
**Comercial:** Planos disponÃ­veis - [Ver PreÃ§os](PRICING.md)
